# UniFi Security Report - Docker Compose Configuration

services:
  unifi-security-report:
    image: ghcr.io/trek-e/unifi-security-report:latest
    container_name: unifi-security-report
    restart: unless-stopped
    network_mode: host

    environment:
      # Connection
      UNIFI_HOST: 192.168.0.1
      UNIFI_USERNAME: admin
      UNIFI_VERIFY_SSL: "false"

      # Schedule (runs daily at 8am Eastern)
      UNIFI_SCHEDULE_PRESET: daily_8am
      UNIFI_SCHEDULE_TIMEZONE: America/New_York

      # File Output
      UNIFI_FILE_ENABLED: "true"
      UNIFI_FILE_OUTPUT_DIR: /app/reports
      UNIFI_FILE_FORMAT: both
      UNIFI_FILE_RETENTION_DAYS: "30"

      # Logging
      UNIFI_LOG_LEVEL: INFO
      UNIFI_LOG_FORMAT: json

    secrets:
      - unifi_password

    volumes:
      - ./reports:/app/reports:rw

secrets:
  unifi_password:
    file: ./secrets/unifi_password.txt
